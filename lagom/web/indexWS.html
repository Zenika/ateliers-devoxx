<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Operations</title>
    <script src="js/jquery-2.2.3.min.js" type="application/javascript"></script>
    <script src="js/vue.min.js" type="application/javascript"></script>
</head>
<body>

<script type="application/javascript">
    var ws
    var example1

    $(function(){
        example1= new Vue({
            el: '#example-1',
            data: {
                items: [
                    { message: 'Foo' },
                    { message: 'Bar' }
                ]
            }
        });
        example1.items.push({ message: 'Lolo' })
    });

    function sendMessage() {
        ws.send($("#message").val());
    }


    function WebSocketTest() {

        // Google example code
        ws = new WebSocket("ws://localhost:9000/api/twitter");
        ws.onopen = function () {


            // Web Socket is connected. You can send data by send() method
            console.log("ws open");
        };
        ws.onmessage = function (evt) {
            var received_msg = evt.data;

            $("#resultat").text(received_msg);

            example1.items.push({ message: received_msg })
            console.log(received_msg);

        };

        ws.onclose = function () { // websocket is closed. };
            console.log("close ws");
        }
    }


</script>


<div id="resultat">test</div>
<div id="streamResultat">
    <input type="text" value="default" id="message"/>
</div>
<div id="connect">
    <button value="Send!" onclick="WebSocketTest()" id="sender">Connect!</button>
</div>
<div id="send">
    <button value="Send!" onclick="sendMessage()" >send!</button>
</div>

<ul id="example-1">
    <li v-for="item in items">
        {{ item.message }}
    </li>
</ul>
</body>
</html>